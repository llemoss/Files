package grupoD.associapp.principal;

import grupoD.associapp.modelo.*;
import java.util.ArrayList;
import java.util.List;

import javax.sql.rowset.JdbcRowSet;
import javax.swing.JOptionPane;

public class AssociApp{
	
	public List<Comunidade> comunidades = new ArrayList<>();
	public int contadorComunidades = 0;
	
	public String buscar(String str){
		String resultado = "";
		for (Comunidade c : comunidades) {
			if(c.getCodigo() == str){
				resultado += c;
			}
		}
		return resultado;
	}
	
	public String mostrarTudo(){
		String resultado = "";
		for (Comunidade comunidade : comunidades) {
			if(comunidade.getNome() != null){
				resultado += comunidade.toString() + "\n";
			}
		}
		return resultado;
	}
	
	public String adquirirCodigo(Comunidade comunidade){
		String str = "";
		for (int i = 0; i < 2; i++) {
			str += comunidade.getCidade().toUpperCase().charAt(i);
		}
		str += contadorComunidades;
		return str;
	}
	
	public void alterarDados(){
		int opcao;
		do{
			String str = "Opções:\n1 - Mostrar situação atual\n2 - Editar comunidade\n3 - Adicionar comunidade completa\n0 - Sair";
			opcao = lerInteiro(str);
			switch(opcao){
				case 1:
					msg(mostrarTudo());
					break;
				case 2:
					String bsc = lerString("Digite código da comunidade a ser editada:");
					break;
				case 3:
					Comunidade comunidade = new Comunidade();
					editarComunidade(comunidade);
					comunidade.setCodigo(adquirirCodigo(comunidade));
					comunidades.add(comunidade);
					contadorComunidades++;
					msg("Comunidade " + comunidade.getNome() + " adicionada com sucesso!");
					break;
				case 0:
					break;
				default:
					break;
			}
		}while(opcao != 0);
	}
	
	public void editarComunidade(Comunidade comunidade){
		while(true){
			String nome;
			nome = lerString("Digite o nome da comunidade:");
			String opcao;
			opcao = lerString("O nome está correto? Nome digitado: " + nome + "\nS - Sim // N - Não").toUpperCase();
			if(opcao.equals("N")){}
			else if(opcao.equals("S")){
				comunidade.setNome(nome);
				break;
			}else{
				msg("Opção inválida!");
			}
		}
		while(true){
			String cidade;
			cidade = lerString("Digite a cidade:");
			String opcao;
			opcao = lerString("A cidade está correta? Cidade digitada: " + cidade + "\nS - Sim // N - Não").toUpperCase();
			if(opcao.equals("N")){}
			else if(opcao.equals("S")){
				comunidade.setCidade(cidade);
				break;
			}else{
				msg("Opção inválida!");
			}
		}
		while(true){
			String regiao;
			regiao = lerString("Digite a região:");
			String opcao;
			opcao = lerString("A região está correta? Região digitada: " + regiao + "\nS - Sim // N - Não").toUpperCase();
			if(opcao.equals("N")){}
			else if(opcao.equals("S")){
				comunidade.setRegiao(regiao);
				break;
			}else{
				msg("Opção inválida!");
			}
		}
		while(true){
			String comercio;
			comercio = lerString("Digite o Tipo de Comercio:");
			String opcao;
			opcao = lerString("O Tipo de Comercio está correta? Tipo de Comercio: " + comercio + "\nS - Sim // N - Não").toUpperCase();
			if(opcao.equals("N")){}
			else if(opcao.equals("S")){
				comunidade.setTipoComercio(comercio);
				break;
			}else{
				msg("Opção inválida!");
			}
		}
		while(true){
			String zona;
			zona = lerString("Digite a zona:");
			String opcao;
			opcao = lerString("A zona está correta? Zona: " + zona + "\nS - Sim // N - Não").toUpperCase();
			if(opcao.equals("N")){}
			else if(opcao.equals("S")){
				comunidade.setZona(zona);
				break;
			}else{
				msg("Opção inválida!");
			}
		}
		while(true){
			double x = 0, y = 0;
			boolean dadoCerto = true;
			while(true){
				dadoCerto=true;
				try{
					x = lerDouble("Digite a coordenada de latitude:");
					y = lerDouble("Digite a coordenada de longitude:");
				}catch(Exception NumberFormatException){
					msg("Digite um número!");
					dadoCerto = false;
				}
				if(dadoCerto==true){
					break;
				}
			}
			String opcao;
			opcao = lerString("As posições estão correta? Posições digitadas:\nx: " + x + "\ny: " + y + "\nS - Sim // N - Não").toUpperCase();
			if(opcao.equals("N")){}
			else if(opcao.equals("S")){
				comunidade.setPosicaoGeografica(x, y);
				break;
			}else{
				msg("Opção inválida!");
			}
		}
	}
		
	static void msg(String str) {
		JOptionPane.showMessageDialog(null, str);
	}

	static int lerInteiro(String str) {
		return Integer.parseInt(JOptionPane.showInputDialog(str));
	}
	
	static double lerDouble(String str) {
		return Double.parseDouble(JOptionPane.showInputDialog(str));
	}
	
	static String lerString(String str) {
		return JOptionPane.showInputDialog(str);
	}

	public static void main(String[] args) {
		
		
		
	}

}
